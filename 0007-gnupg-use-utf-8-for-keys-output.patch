From 558f8198192d4b42c563d587e3cce854a3e84de1 Mon Sep 17 00:00:00 2001
From: Ivan Romanov <drizt@land.ru>
Date: Thu, 29 Oct 2015 03:27:36 +0500
Subject: [PATCH 07/11] gnupg: use utf-8 for keys output

---
 plugins/qca-gnupg/gpgaction.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/plugins/qca-gnupg/gpgaction.cpp b/plugins/qca-gnupg/gpgaction.cpp
index 96729e6..82d5ec7 100644
--- a/plugins/qca-gnupg/gpgaction.cpp
+++ b/plugins/qca-gnupg/gpgaction.cpp
@@ -303,12 +303,18 @@ void GpgAction::start()
 	}
 	case GpgOp::SecretKeyringFile:
 	{
+#ifndef Q_OS_WIN
+		args += "--display-charset=utf-8";
+#endif
 		args += "--list-secret-keys";
 		readText = true;
 		break;
 	}
 	case GpgOp::PublicKeyringFile:
 	{
+#ifndef Q_OS_WIN
+		args += "--display-charset=utf-8";
+#endif
 		args += "--list-public-keys";
 		readText = true;
 		break;
-- 
2.5.0

